{"remainingRequest":"/Users/yankaikuo/Transor/transor-extension/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/yankaikuo/Transor/transor-extension/src/components/TranslationControl.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/yankaikuo/Transor/transor-extension/src/components/TranslationControl.vue","mtime":1744726077864},{"path":"/Users/yankaikuo/Transor/transor-extension/node_modules/cache-loader/dist/cjs.js","mtime":1744643640207},{"path":"/Users/yankaikuo/Transor/transor-extension/node_modules/babel-loader/lib/index.js","mtime":1744643640966},{"path":"/Users/yankaikuo/Transor/transor-extension/node_modules/cache-loader/dist/cjs.js","mtime":1744643640207},{"path":"/Users/yankaikuo/Transor/transor-extension/node_modules/vue-loader/lib/index.js","mtime":1744643641085}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IG1hcFN0YXRlLCBtYXBBY3Rpb25zLCBtYXBNdXRhdGlvbnMgfSBmcm9tICd2dWV4JwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdUcmFuc2xhdGlvbkNvbnRyb2wnLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhY3RpdmVDb2xsYXBzZTogW10sCiAgICAgIGV4Y2x1ZGVkQ2xhc3Nlc1N0cjogJycKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBTdGF0ZShbCiAgICAgICdpc0VuYWJsZWQnLAogICAgICAnZXhjbHVkZWRUYWdzJywKICAgICAgJ2V4Y2x1ZGVkQ2xhc3NlcycsCiAgICAgICdjdXN0b21Dc3MnCiAgICBdKSwKICAgIGlzVHJhbnNsYXRpb25FbmFibGVkOiB7CiAgICAgIGdldCgpIHsKICAgICAgICByZXR1cm4gdGhpcy5pc0VuYWJsZWQKICAgICAgfSwKICAgICAgc2V0KCkgewogICAgICAgIC8vIOmAmui/h3RvZ2dsZVRyYW5zbGF0aW9u5pON5L2c5p2l5L+u5pS5CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIC4uLm1hcEFjdGlvbnMoWwogICAgICAndG9nZ2xlVHJhbnNsYXRpb24nLAogICAgICAnc2F2ZVNldHRpbmdzJwogICAgXSksCiAgICAuLi5tYXBNdXRhdGlvbnMoWwogICAgICAnc2V0RXhjbHVkZWRUYWdzJywKICAgICAgJ3NldEV4Y2x1ZGVkQ2xhc3NlcycsCiAgICAgICdzZXRDdXN0b21Dc3MnCiAgICBdKSwKICAgIHRyYW5zbGF0ZUN1cnJlbnRQYWdlKCkgewogICAgICBjaHJvbWUudGFicy5xdWVyeSh7IGFjdGl2ZTogdHJ1ZSwgY3VycmVudFdpbmRvdzogdHJ1ZSB9LCAodGFicykgPT4gewogICAgICAgIGNocm9tZS50YWJzLnNlbmRNZXNzYWdlKHRhYnNbMF0uaWQsIHsgYWN0aW9uOiAndHJhbnNsYXRlJyB9KQogICAgICB9KQogICAgfSwKICAgIHNhdmVFeGNsdWRlZFRhZ3MoKSB7CiAgICAgIHRoaXMuc2F2ZVNldHRpbmdzKCkKICAgIH0sCiAgICBzYXZlRXhjbHVkZWRDbGFzc2VzKCkgewogICAgICB0aGlzLnNldEV4Y2x1ZGVkQ2xhc3Nlcyh0aGlzLmV4Y2x1ZGVkQ2xhc3Nlc1N0ci5zcGxpdCgnLCcpLm1hcChjbHMgPT4gY2xzLnRyaW0oKSkuZmlsdGVyKGNscyA9PiBjbHMpKQogICAgICB0aGlzLnNhdmVTZXR0aW5ncygpCiAgICB9LAogICAgc2F2ZUN1c3RvbUNzcygpIHsKICAgICAgdGhpcy5zZXRDdXN0b21Dc3ModGhpcy5jdXN0b21Dc3MpCiAgICAgIHRoaXMuc2F2ZVNldHRpbmdzKCkKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBleGNsdWRlZENsYXNzZXM6IHsKICAgICAgaGFuZGxlcihuZXdWYWwpIHsKICAgICAgICB0aGlzLmV4Y2x1ZGVkQ2xhc3Nlc1N0ciA9IG5ld1ZhbC5qb2luKCcsICcpCiAgICAgIH0sCiAgICAgIGltbWVkaWF0ZTogdHJ1ZQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdsb2FkU2V0dGluZ3MnKQogIH0KfQo="},{"version":3,"sources":["TranslationControl.vue"],"names":[],"mappings":";AAiEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"TranslationControl.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"translation-control\">\n    <h3>翻译控制</h3>\n    \n    <div class=\"control-panel\">\n      <div class=\"toggle-container\">\n        <span>翻译开关</span>\n        <el-switch\n          v-model=\"isTranslationEnabled\"\n          active-color=\"#13ce66\"\n          inactive-color=\"#ff4949\"\n          @change=\"toggleTranslation\"\n        ></el-switch>\n      </div>\n      \n      <el-button type=\"primary\" size=\"small\" @click=\"translateCurrentPage\" :disabled=\"!isTranslationEnabled\">\n        立即翻译当前页面\n      </el-button>\n      \n      <el-collapse v-model=\"activeCollapse\">\n        <el-collapse-item title=\"高级设置\" name=\"advanced\">\n          <div class=\"advanced-settings\">\n            <el-form label-position=\"top\" size=\"small\">\n              <el-form-item label=\"不翻译的HTML标签\">\n                <el-select\n                  v-model=\"excludedTags\"\n                  multiple\n                  placeholder=\"选择不翻译的HTML标签\"\n                  @change=\"saveExcludedTags\"\n                >\n                  <el-option label=\"代码块(code)\" value=\"code\"></el-option>\n                  <el-option label=\"预格式化文本(pre)\" value=\"pre\"></el-option>\n                  <el-option label=\"脚本(script)\" value=\"script\"></el-option>\n                  <el-option label=\"样式(style)\" value=\"style\"></el-option>\n                  <el-option label=\"标题(h1-h6)\" value=\"h1,h2,h3,h4,h5,h6\"></el-option>\n                  <el-option label=\"链接(a)\" value=\"a\"></el-option>\n                </el-select>\n              </el-form-item>\n              \n              <el-form-item label=\"不翻译的CSS类名\">\n                <el-input\n                  v-model=\"excludedClassesStr\"\n                  placeholder=\"输入不翻译的CSS类名，多个用逗号分隔\"\n                  @change=\"saveExcludedClasses\"\n                ></el-input>\n              </el-form-item>\n              \n              <el-form-item label=\"自定义CSS样式\">\n                <el-input\n                  type=\"textarea\"\n                  v-model=\"customCss\"\n                  placeholder=\"输入自定义CSS样式\"\n                  rows=\"3\"\n                  @change=\"saveCustomCss\"\n                ></el-input>\n              </el-form-item>\n            </el-form>\n          </div>\n        </el-collapse-item>\n      </el-collapse>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapActions, mapMutations } from 'vuex'\n\nexport default {\n  name: 'TranslationControl',\n  data() {\n    return {\n      activeCollapse: [],\n      excludedClassesStr: ''\n    }\n  },\n  computed: {\n    ...mapState([\n      'isEnabled',\n      'excludedTags',\n      'excludedClasses',\n      'customCss'\n    ]),\n    isTranslationEnabled: {\n      get() {\n        return this.isEnabled\n      },\n      set() {\n        // 通过toggleTranslation操作来修改\n      }\n    }\n  },\n  methods: {\n    ...mapActions([\n      'toggleTranslation',\n      'saveSettings'\n    ]),\n    ...mapMutations([\n      'setExcludedTags',\n      'setExcludedClasses',\n      'setCustomCss'\n    ]),\n    translateCurrentPage() {\n      chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {\n        chrome.tabs.sendMessage(tabs[0].id, { action: 'translate' })\n      })\n    },\n    saveExcludedTags() {\n      this.saveSettings()\n    },\n    saveExcludedClasses() {\n      this.setExcludedClasses(this.excludedClassesStr.split(',').map(cls => cls.trim()).filter(cls => cls))\n      this.saveSettings()\n    },\n    saveCustomCss() {\n      this.setCustomCss(this.customCss)\n      this.saveSettings()\n    }\n  },\n  watch: {\n    excludedClasses: {\n      handler(newVal) {\n        this.excludedClassesStr = newVal.join(', ')\n      },\n      immediate: true\n    }\n  },\n  created() {\n    this.$store.dispatch('loadSettings')\n  }\n}\n</script>\n\n<style scoped>\n.translation-control {\n  margin-bottom: 10px;\n}\n\nh3 {\n  font-size: 16px;\n  margin-top: 0;\n  margin-bottom: 12px;\n}\n\n.control-panel {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n\n.toggle-container {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 8px;\n}\n\n.advanced-settings {\n  margin-top: 10px;\n}\n</style> "]}]}